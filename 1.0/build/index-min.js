/*! overwrite - v1.0 - 2013-08-27 4:31:18 PM
* Copyright (c) 2013 ued; Licensed  */
KISSY.add("gallery/overwrite/1.0/index",function(a,b,c){function d(a){var b=this;d.superclass.constructor.call(b,a)}return b.all,a.extend(d,c,{init:function(){var a=this,b=a.get("node");b&&(a.bindUI(),a.bindEvent())},bindUI:function(){var b=this,c=b.get("node");c.addClass("overwrite_input"),c.val("");var d=a.DOM.create('<div class="J_OverwriteWraper overwrite"/>');c.wrap(d),d=a.all(".J_OverwriteWraper");var e=a.DOM.create('<span class="overwrite_tip J_OverwriteTip"/>');d.append(e),e=a.all(".J_OverwriteTip"),c.css({textIndent:"-99999px"}),e.css({fontSize:c.css("fontSize"),lineHeight:c.css("lineHeight"),top:c.height()/2,left:"4px"}),e.html(b.get("pattern"))},bindEvent:function(){var b=this,c=b.get("node"),d=b.get("separator"),e=b.get("pattern");c.on("keyup",function(b){var c=a.one(b.currentTarget),f=c.val(),g=e.length,h=f.length,i=e.slice(h,g),j=f.slice(0,g),k=f.slice(h-1),l=e.slice(h-1,h);l===d&&k!==d&&(j=j.slice(0,h-1)+d+k,i=i.slice(1),c.val(j)),h>g&&c.val(j);var m=c.parent(".J_OverwriteWraper"),n=m.one(".J_OverwriteTip");n.html(j+i)})}},{ATTRS:{node:{value:null},pattern:{value:"YYYY-MM-DD"},separator:{value:"-"},wrapSel:{value:"J_OverwriteWraper"},tipSel:{value:"J_OverwriteTip"}}}),d},{requires:["node","base","./index.css"]});